<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>夜の大人診断</title>
<link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;700&family=Noto+Sans+JP&display=swap" rel="stylesheet">
<style>
body {
  font-family: 'Noto Sans JP', sans-serif;
  background: linear-gradient(135deg, #0d0d0d, #2c0a0a);
  color: #fff;
  margin: 0;
  padding: 15px;
}
h1 {
  font-family: 'Oswald', sans-serif;
  color: #d32f2f;
  text-align: center;
  margin-bottom: 30px;
  font-size: 24px;
  text-transform: uppercase;
}
.logo-title {
  margin-top: 10px;
  position: relative;
  z-index: 2;
}

.logo-title img {
  width: 250px; /* 適宜調整 */
  height: auto;
  filter: drop-shadow(0 0 10px rgba(255, 0, 0, 0.6));
}

#quiz {
  max-width: 480px;
  margin: 0 auto;
}
.question {
  background: rgba(255,255,255,0.05);
  padding: 18px;
  border-radius: 10px;
  margin-bottom: 20px;
  font-size: 18px;
  transition: transform 0.3s;
}  
  .options {
  text-align: center;      /* ボタンを中央寄せ */
}

.options button {
  display: block;          /* 1つずつ縦に並べる場合 */
  width: 80%;              /* ボタンの幅を揃える */
  margin: 10px auto;       /* 中央寄せ */
}
button {
  margin: 8px 5px 0 0;
  padding: 14px 0;
  width: 48%;
  background: #d32f2f;
  color: white;
  border: none;
  cursor: pointer;
  border-radius: 6px;
  font-weight: bold;
  font-size: 16px;
  transition: 0.3s;
}
button:hover {
  background: linear-gradient(45deg, #b71c1c, #f44336);
  transform: translateY(-2px);
}
.result {
  display: none;
  max-width: 480px;
  margin: 30px auto;
  padding: 25px;
  border-radius: 12px;
  background: rgba(0,0,0,0.85);
  text-align: center;
  box-shadow: 0 0 25px #d32f2f;
}
.result h2 {
  font-family: 'Oswald', sans-serif;
  font-size: 22px;
  color: #f44336;
  margin-bottom: 10px;
}
.result h3 {
  font-size: 18px;
  margin-bottom: 15px;
}
.result img {
  width: 250px;      /* 幅を大きく */
  height: auto;      /* 高さ自動で縦横比維持 */
  margin-bottom: 15px;
  border-radius: 12px;
  object-fit: cover;
  box-shadow: 0 0 25px #d32f2f;  /* 少し影を大きく */
}
#types-btn {
  background: linear-gradient(45deg, #6a1b9a, #ab47bc);
  color: #fff;
  border: 2px solid #ce93d8;
  border-radius: 8px;
  padding: 12px 20px;
  font-weight: bold;
  font-size: 16px;
  cursor: pointer;
  box-shadow: 0 0 15px rgba(171, 71, 188, 0.6);
  transition: 0.3s;
}

#types-btn:hover {
  background: linear-gradient(45deg, #ab47bc, #ce93d8);
  box-shadow: 0 0 25px rgba(171, 71, 188, 0.8);
  transform: translateY(-2px);
}
.share-btn {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  margin: 5px;
  padding: 8px 12px;
  border-radius: 6px;
  text-decoration: none;
  color: #fff;
  font-weight: bold;
  font-size: 14px;
  transition: 0.2s;
}

.share-btn .icon {
  width: 20px;
  height: 20px;
  vertical-align: middle;
  filter: invert(100%);
}

.share-btn.twitter { background: #1da1f2; }
.share-btn.twitter:hover { background: #0d95e8; }

.share-btn.line { background: #00c300; }
.share-btn.line:hover { background: #00a500; }

.share-btn.facebook { background: #1877f2; }
.share-btn.facebook:hover { background: #0f62e0; }

.progress-bar {
  position: relative;  /* ここが重要 */
  height: 6px;
  background: #333;
  border-radius: 3px;
  overflow: visible;
  margin-bottom: 18px;
}

.progress-bar-inner {
  height: 6px;
  width: 0%;
  background: #d32f2f;
  transition: width 0.3s;
}

.progress-percent {
  position: absolute;
  top: -20px;
  left: 0; /* 初期値を0に */
  font-size: 12px;
  color: #fff;
  font-weight: bold;
  z-index: 10;
}

.question.finished {
  text-align: center;
  font-size: 20px; /* お好みで */
  font-weight: bold;
}

@media (max-width: 400px) {
  .question { font-size: 16px; padding: 15px; }
  button { font-size: 14px; padding: 12px 0; width: 100%; margin-bottom: 10px; }
  .result img { width: 180px; height: auto; }
}
</style>
</head>
<body>

<h1 class="logo-title">
  <img src="images/title-logo.png" alt="夜の大人診断">
</h1>

<div id="quiz">
  <div class="progress-bar">
  <div class="progress-bar-inner" id="progress"></div>
  <div class="progress-percent" id="progress-percent">0%</div>
</div>
  <div id="question-container"></div>
</div>

<div id="result" class="result">
  <h2 id="result-code"></h2>
  <h3 id="result-name"></h3>
  <p id="result-desc"></p>
  <img id="result-img" alt="">
  <br>

  <!-- 16タイプ説明ボタン（最初は非表示） -->
  <button id="types-btn" onclick="location.href='explanation.html'" style="display:none; margin-top:15px;">
    16タイプの説明
  </button>
</div>


<div id="share-buttons" style="margin-top:15px; text-align:center; display:none;">
  <a id="share-twitter-btn" target="_blank" class="share-btn twitter">
    <img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/twitter.svg" alt="Twitter" class="icon"> Twitter
  </a>
  <a id="share-line-btn" target="_blank" class="share-btn line">
    <img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/line.svg" alt="LINE" class="icon"> LINE
  </a>
  <a id="share-facebook-btn" target="_blank" class="share-btn facebook">
    <img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/facebook.svg" alt="Facebook" class="icon"> Facebook
  </a>
</div>

<div class="result-buttons" style="margin-top:30px; text-align:center;">
  <!-- 常に表示 -->
  <button onclick="location.href='index.html'">ホームへ戻る</button>
  <button onclick="location.reload()">もう1度診断する</button>
</div>



<script>
// ----------------質問リスト----------------
const questions = [
  { text: "夜は自分でリードしたい派ですか？それともリードされたい派ですか？", direction:"D", axis:"DS", options: ["絶対にリードされたい","リードされたい","できればリードされたい","できればリードしたい","リードしたい","絶対にリードしたい"] },
  { text: "相手に指示されるより、自分の好みを優先したいですか？", direction:"D", axis:"DS", options: ["絶対に相手に従いたい","相手に従いたい","できれば相手に従いたい","できれば自分の好みを優先したい","自分の好みを優先したい","絶対に自分の好みを優先したい"] },
  { text: "快楽を優先して行動しますか？", direction:"F", axis:"FE", options: ["絶対に優先しない","優先しない","あまり優先しない","少し優先する","優先する","絶対に優先する"] },
  { text: "心のつながりを感じることで興奮しますか？", direction:"E", axis:"FE", options: ["全く興奮しない","興奮しない","あまり興奮しない","少し興奮する","興奮する","めっちゃ興奮する"] },
  { text: "性的欲望は隠さずオープンに表現しますか？", direction:"O", axis:"OC", options: ["絶対に隠す","隠す","できるだけ隠す","少しは表現する","表現する","めっちゃ表現する"] },
  { text: "関係が浅くても性の本性を見せられますか？", direction:"O", axis:"OC", options: ["絶対に見せたくない","見せたくない","できるだけ見せたくない","少しは見せたい","見せたい","めっちゃ見せたい"] },
  { text: "新しいプレイやシチュエーションに挑戦するのが好きですか？", direction:"A", axis:"AN", options: ["絶対に挑戦したくない","挑戦したくない","できるだけ挑戦したくない","少しは挑戦したい","挑戦したい","めっちゃ挑戦したい"] },
  { text: "安定したルーティン的なプレイが心地よいですか？", direction:"N", axis:"AN", options: ["全く物足りない","物足りない","少し物足りない","少しは心地よい","心地よい","めっちゃ心地よい"] },
  { text: "プレイ中、相手と自分どちらの快楽を重視しますか？", direction:"E", axis:"FE", options: ["完全に自分","自分","どちらかというと自分","どちらかというと相手","相手","完全に相手"] },
  { text: "感情の高まりに身を任せることはありますか？", direction:"F", axis:"FE", options: ["全くない","ほぼない","あまりない","たまにある","割とある","めっちゃある"] },
  { text: "遊びや実験的プレイに抵抗はありますか？", direction:"C", axis:"OC", options: ["逆に不可欠","全く抵抗ない","抵抗ない","少し抵抗ある","抵抗ある","めっちゃ抵抗ある"] },
  { text: "プレイ中に新しいことに挑戦するのはワクワクしますか？", direction:"A", axis:"AN", options: ["全くワクワクしない","ワクワクしない","あまりワクワクしない","少しワクワクする","ワクワクする","めっちゃワクワクする"] },
  { text: "相手の要求であれば多少嫌でも受け入れますか？", direction:"S", axis:"DS", options: ["絶対に受け入れない","受け入れない","受け入れる余地はある","少しは受け入れる","受け入れる","喜んで受け入れる"] },
  { text: "相手の気持ちを優先しすぎて自分の快楽は後回しになることがありますか？", direction:"E", axis:"FE", options: ["全くない","ない","あまりない","たまにある","ある","めっちゃある"] },
  { text: "性的な楽しみを遠慮なく受け止められますか？", direction:"O", axis:"OC", options: ["全く受け止められない","受け止められない","あまり受け止められない","少しは受け止められる","受け止められる","めっちゃ受け止められる"] },
  { text: "好奇心旺盛で性欲に従順な方ですか？", direction:"A", axis:"AN", options: ["全く従順でない","従順ではない","あまり従順ではない","少しは従順","従順","めっちゃ従順"] },
  { text: "秘密の関係が好きですか？", direction:"O", axis:"OC", options: ["全く好きでない","好きではない","あまり好きではない","少しは好き","好き","めっちゃ好き"] },
  { text: "安定感・安心感を重視しますか？", direction:"N", axis:"AN", options: ["全く重視しない","重視しない","あまり重視しない","やや重視する","重視する","めっちゃ重視する"] },
  { text: "恋愛や愛情表現が重要ですか？", direction:"E", axis:"FE", options: ["全く重要でない","重要ではない","あまり重要ではない","やや重要","重要","めっちゃ重要"] },
  { text: "相手に尽くす/尽くされたいタイプのどちらですか？", direction:"D", axis:"DS", options: ["めっちゃ尽くされたい","尽くされたい","どちらかというと尽くされたい","どちらかというと尽くしたい","尽くしたい","めっちゃ尽くしたい"] },
];

// ----------------タイプ説明文----------------
const types = {
  "D-F-O-A": { name:"絶対主導権握りたい肉体モンスター", desc:"本能のまま主導権を握り、肉体的な刺激を追い求める情熱的なタイプ。相手を圧倒するカリスマを持ちます。" },
  "D-F-O-N": { name:"理性ぶったセックス中毒者", desc:"頭では理性を保っているつもりでも、実は快楽に抗えない隠れ中毒者。理性と欲望の狭間で揺れ動きます。" },
  "D-F-C-A": { name:"ドSな快楽マッドサイエンティスト", desc:"相手を実験台にするかのように、快楽の可能性を探求するドS研究者タイプ。常に新しい刺激を求めます。" },
  "D-F-C-N": { name:"肉体信仰の支配リーダー", desc:"愛よりも肉体的な快感を重視し、主導権を握りたい強い支配欲を持つリーダー気質。" },
  "D-E-O-A": { name:"愛を説く支配系ロマンチスト", desc:"支配欲と同時に愛を語り、ロマンチックに相手を導くタイプ。情熱と優しさの二面性を持ちます。" },
  "D-E-O-N": { name:"甘やかしドSカリスマ", desc:"相手を支配しつつも、時には甘やかす。Sっ気と包容力を兼ね備えたカリスマ的存在。" },
  "D-E-C-A": { name:"幻想的SM詩人", desc:"愛や感情を幻想的に表現しながら、SM的要素も楽しむ芸術家気質のロマンチスト。" },
  "D-E-C-N": { name:"重たい愛の支配者", desc:"愛情が深すぎて、時に相手を縛りつけるほどの重たい支配力を発揮するタイプ。" },
  "S-F-O-A": { name:"快楽を追い求める猿系モンスター", desc:"ひたすら快楽に忠実で、飽くなき欲求を追い続けるエネルギッシュなタイプ。" },
  "S-F-O-N": { name:"セクシャル従順ペット", desc:"子犬のように従順で、相手の望みを叶えることに喜びを感じる可愛らしいタイプ。" },
  "S-F-C-A": { name:"隠れ変態チャレンジャー", desc:"一見大人しそうに見えて、実は新しい快楽への挑戦に積極的な隠れ変態タイプ。" },
  "S-F-C-N": { name:"おとなしい肉体奉仕者", desc:"大人しく従順で、相手を満足させることを自らの喜びとする献身的なタイプ。" },
  "S-E-O-A": { name:"恋愛依存のセックスロマンチスト", desc:"恋愛感情と快感を強く結びつけ、愛を求め続けるロマンチックな情熱家。" },
  "S-E-O-N": { name:"純愛に溺れるベッドの仔犬", desc:"愛情に包まれることを何よりも大切にし、相手に尽くす純粋な仔犬タイプ。" },
  "S-E-C-A": { name:"秘密主義の危険な夢想家", desc:"秘密を抱えつつ、危うい魅力を放つ幻想的な夢想家。ミステリアスな一面が特徴です。" },
  "S-E-C-N": { name:"究極の尽くし系セックス聖人", desc:"愛情深く、相手の欲望をひたすら受け止める究極の献身タイプ。" },
};

// ----------------変数----------------
let current = 0;
let answers = [];
const axisDirectionMap = { DS: 'D', FE: 'F', OC: 'O', AN: 'A' };

// ----------------関数----------------
function showQuestion() {
  const questionContainer = document.getElementById("question-container");

  if(current >= questions.length) {
    // 最後の質問が終わったら「結果を見る」ボタン表示
    questionContainer.innerHTML = `
  <div class="question finished">あなたの夜の大人診断結果が出ました。</div>
  <div class="options">
    <button onclick="showResult()">結果を見る</button>
  </div>
`;


    // プログレスバーを100%に
    const progress = document.getElementById("progress");
    const progressPercent = document.getElementById("progress-percent");
    progress.style.width = `100%`;
    progressPercent.textContent = `100%`;

    const barWidth = progress.parentElement.offsetWidth;
    progressPercent.style.left = `${barWidth - 30}px`; // 右端に固定
    return;
  }

  const q = questions[current];
  questionContainer.innerHTML = `
    <div class="question"><strong>Q${current+1}:</strong> ${q.text}</div>
    <div class="options">
      ${q.options.map((opt,i)=>`<button onclick="selectAnswer('${q.axis}',${i+1},'${q.direction}')">${opt}</button>`).join("")}
    </div>
  `;

  // プログレスバー更新（現在の質問に応じて％）
  const progress = document.getElementById("progress");
  const progressPercent = document.getElementById("progress-percent");
  const percent = Math.round((current / questions.length) * 100);
  progress.style.width = `${percent}%`;
  progressPercent.textContent = `${percent}%`;

  const barWidth = progress.parentElement.offsetWidth;
  progressPercent.style.left = `${Math.min(barWidth * (percent / 100) - 15, barWidth - 30)}px`;
}

function selectAnswer(axis, value, direction) {
  const score = (direction === axisDirectionMap[axis]) ? value - 3.5 : 3.5 - value;
  answers.push({axis, score});
  current++;
  showQuestion();
}

function showResult() {
  document.getElementById("quiz").style.display = "none"; // クイズ非表示
  const axes = {DS:0, FE:0, OC:0, AN:0};
  answers.forEach(a => axes[a.axis] += a.score);

  const code =
    (axes.DS >= 0 ? "D" : "S") + "-" +
    (axes.FE >= 0 ? "F" : "E") + "-" +
    (axes.OC >= 0 ? "O" : "C") + "-" +
    (axes.AN >= 0 ? "A" : "N");

  const type = types[code] || types["S-F-O-A"];
  const resultDiv = document.getElementById("result");
  resultDiv.style.display = "block"; // 結果表示

  document.getElementById("result-code").textContent = `あなたのタイプは ${code}`;
  document.getElementById("result-name").textContent = type.name;
  document.getElementById("result-desc").textContent = type.desc;
  document.getElementById("result-img").src = `images/${code}.jpg`;
  document.getElementById("result-img").alt = type.name;

  // 結果画面になったら16タイプ説明ボタンを表示
document.getElementById("types-btn").style.display = "inline-block";

  // SNSシェアボタンを表示
  const shareButtons = document.getElementById("share-buttons");
  shareButtons.style.display = "block";

  // SNSリンク設定
  setShareLinks(`${type.name} (${code})`);
}
function setShareLinks(resultName) {
  const url = encodeURIComponent(location.href);
  const text = encodeURIComponent(`診断したら私は『${resultName}』タイプでした！ #大人診断`);

  document.getElementById("share-twitter-btn").href =
    `https://twitter.com/intent/tweet?text=${text}&url=${url}`;
  document.getElementById("share-line-btn").href =
    `https://social-plugins.line.me/lineit/share?url=${url}`;
  document.getElementById("share-facebook-btn").href =
    `https://www.facebook.com/sharer/sharer.php?u=${url}`;
}

// 初期表示
showQuestion();
</script>

</body>
</html>
